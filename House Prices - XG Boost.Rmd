---
title: "Predicting House Prices with XGBoost"
output:
  html_document:
    number_sections: true
    toc: true
    toc_depth: 3
---

```{r, include=FALSE}
setwd("C:/Users/Dyson.Thacker/OneDrive - Bluestem/Documents/Dictionaries/House Prices with R")
```


# Executive Summary


# Introduction

# Loading data and Packages

```{r, message = FALSE, warning = FALSE}
# Read packages
library(ggplot2)
library(readr)
library(dplyr)
library(ggrepel)
library(scales)
library(knitr)
library(corrplot)
```


```{r, message = FALSE}
test <- read_csv("test.csv")
train <- read_csv("train.csv")


#Saving IDs in a vector for later
test_labels <- test$Id
test$Id <- NULL
train$Id <- NULL

test$SalePrice <- NA
all <- rbind(train, test)
```

# Categorizing data types
```{r, message = FALSE}
numeric_variables <- c(3,4,17,18,19,20,26,34,36,37,38,43,44,45,46:52,54,56,59,61,62,66:71,75,77,80)
factor_variables <- c(1, 2,5,6,7,8,9,10,11,12,13,14,15,16,21,22,23,24,25,27,28,29,30,31,32,33,
35,39,40,41,42,53,55,57,58,60,63,64,65,72,73,74,76,78,79)

all[numeric_variables] <- lapply(all[numeric_variables],as.numeric)
all[factor_variables] <- lapply(all[factor_variables],as.factor)
```

# Exploratory Data Analysis

## SalePrice
```{r, message=FALSE}
ggplot(data=all[!is.na(all$SalePrice),], aes(x=SalePrice)) +
        geom_histogram(fill="blue", binwidth = 10000) +
        scale_x_continuous(breaks= seq(0, 800000, by = 100000), labels = comma)
```

SalePrice is very right skewed. This was expected as very few people can afford very expensive houses. This will need to be kept in mind, and will be dealt with before modeling.

```{r}
summary(all$SalePrice)
```

## Most Important Numeric Predictors
```{r}
numeric.vars <- which(sapply(all, is.numeric)) #index vector numeric variables
numeric.var.names <- names(numeric.vars) #saving names vector for use later on

all.num.var <- all[, numeric.vars]
cor.num.var <- cor(all.num.var, use="pairwise.complete.obs") #correlations of all numeric variables

cor.sorted <- as.matrix(sort(cor.num.var[,'SalePrice'], decreasing = TRUE)) #sort on decreasing correlations with SalePrice

#select only high corelations
CorHigh <- names(which(apply(cor.sorted, 1, function(x) abs(x)>0.5)))
cor.num.var <- cor.num.var[CorHigh, CorHigh]

corrplot.mixed(cor.num.var, tl.col="black", tl.pos = "lt")
```

Ten variables have a correlation above 0.5 with SalePrice.

## Overall Quality

The Variable Overall Quality, defined as "The  overall material and finish of the house," has the highest correlation with SalePrice.

```{r}
ggplot(data=all[!is.na(all$SalePrice),], aes(x=factor(OverallQual), y=SalePrice))+
        geom_boxplot(col='blue') + labs(x='Overall Quality') +
        scale_y_continuous(breaks= seq(0, 800000, by=100000), labels = comma)
```


## Above Ground Living Area



## Tabset Example {.tabset}

### Tabset
```{r}
print("Hello world 1")
```

### Tabset1
```{r}
print("Hello world 2")
```


### Tabset2
```{r}
print("Hello world 3")
```

# Feature engineering

## Total Square Feet

## Total Bathrooms

## Age of the House

# Modeling
















# Save predictions

<!-- ```{r} -->
<!-- sub_avg <- data.frame(Id = test_labels, SalePrice = ) -->
<!-- head(sub_avg) -->
<!-- write.csv(sub_avg, file = 'average.csv', row.names = F) -->
<!-- ``` -->

